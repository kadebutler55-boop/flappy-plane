
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Flappy Plane</title>
<style>
body { margin:0; text-align:center; background:skyblue; font-family:Arial; }
canvas { background:#87ceeb; display:block; margin:20px auto; border:2px solid #333; }
button { padding:10px 20px; font-size:16px; margin:5px; cursor:pointer; }
#shapeMenu { display:none; margin-top:20px; }
</style>
</head>
<body>

<h1>Flappy Plane</h1>
<button id="startBtn">Play</button>

<div id="shapeMenu">
    <h2>Choose Your Shape</h2>
    <button class="shapeBtn" data-shape="plane">Paper Plane</button>
    <button class="shapeBtn" data-shape="block">Block</button>
    <button class="shapeBtn" data-shape="circle">Circle</button>
</div>

<canvas id="gameCanvas" width="400" height="600" style="display:none"></canvas>
<div id="highScoreDisplay">High Score: 0</div>

<script>
const canvas = document.getElementById("gameCanvas");
const ctx = canvas.getContext("2d");
const startBtn = document.getElementById("startBtn");
const shapeMenu = document.getElementById("shapeMenu");
const shapeButtons = document.querySelectorAll(".shapeBtn");
const highScoreDiv = document.getElementById("highScoreDisplay");

let plane = { x: 80, y: 300, vy: 0 };
let pipes = [];
let score = 0;
let game = false;
let highScore = localStorage.getItem("flappyPlaneHighScore") || 0;
highScoreDiv.textContent = "High Score: " + highScore;

let playerShape = "plane";

// --- Even faster game settings ---
const gravity = 0.6;   // faster falling
const flap = -8;        // stronger flap
const pipeSpeed = 3.5;  // faster pipes

// Draw shapes
function drawPlane() {
    ctx.fillStyle = "white";
    ctx.strokeStyle = "black";
    ctx.lineWidth = 2;
    if(playerShape === "plane"){
        ctx.beginPath();
        ctx.moveTo(plane.x, plane.y);
        ctx.lineTo(plane.x - 25, plane.y + 10);
        ctx.lineTo(plane.x - 25, plane.y - 10);
        ctx.closePath();
        ctx.fill();
        ctx.stroke();
    } else if(playerShape === "block"){
        ctx.fillRect(plane.x, plane.y, 30, 30);
        ctx.strokeRect(plane.x, plane.y, 30, 30);
    } else if(playerShape === "circle"){
        ctx.beginPath();
        ctx.arc(plane.x+15, plane.y+15, 15, 0, Math.PI*2);
        ctx.fill();
        ctx.stroke();
    }
}

function draw() {
    ctx.clearRect(0,0,canvas.width,canvas.height);
    drawPlane();

    // Pipes
    pipes.forEach(p => {
        ctx.fillStyle = "green";
        ctx.fillRect(p.x, 0, 50, p.top);
        ctx.fillRect(p.x, canvas.height - p.bottom, 50, p.bottom);
    });

    // Score
    ctx.fillStyle = "black";
    ctx.font = "25px Arial";
    ctx.fillText("Score: "+score, 10, 30);
}

// Collision detection
function checkCollision() {
    for(let p of pipes){
        let planeLeft = plane.x, planeRight, planeTop = plane.y, planeBottom;
        if(playerShape === "plane"){
            planeRight = plane.x;
            planeTop = plane.y - 10;
            planeBottom = plane.y + 10;
            if(planeRight > p.x && planeLeft - 25 < p.x + 50 && (planeTop < p.top || planeBottom > canvas.height - p.bottom)) return true;
        } else if(playerShape === "block"){
            planeRight = plane.x + 30;
            planeBottom = plane.y + 30;
            if(planeRight > p.x && planeLeft < p.x + 50 && (planeTop < p.top || planeBottom > canvas.height - p.bottom)) return true;
        } else if(playerShape === "circle"){
            let cx = plane.x + 15, cy = plane.y + 15, r = 15;
            if(cx + r > p.x && cx - r < p.x + 50 && cy - r < p.top) return true;
            if(cx + r > p.x && cx - r < p.x + 50 && cy + r > canvas.height - p.bottom) return true;
        }
    }
    if(playerShape === "circle"){
        if(plane.y < 0 || plane.y + 30 > canvas.height) return true;
    } else {
        if(plane.y < 0 || plane.y + 30 > canvas.height) return true;
    }
    return false;
}

function update() {
    if(!game) return;

    plane.vy += gravity;
    plane.y += plane.vy;

    if(pipes.length==0 || pipes[pipes.length-1].x < 250){
        let top = Math.random() * 200 + 50;
        pipes.push({ x:400, top:top, bottom:canvas.height - top - 150, passed:false });
    }

    pipes.forEach(p => {
        p.x -= pipeSpeed;
        if(!p.passed && p.x + 50 < plane.x){
            score++;
            p.passed = true;
        }
    });

    pipes = pipes.filter(p => p.x + 50 > 0);

    if(checkCollision()){
        game = false;
        if(score > highScore){
            highScore = score;
            localStorage.setItem("flappyPlaneHighScore", highScore);
        }
        highScoreDiv.textContent = "High Score: " + highScore;
        alert("Game Over! Score: "+score);
        score = 0;
        pipes = [];
        plane.y = 300;
        plane.vy = 0;
        canvas.style.display = "none";
        startBtn.style.display = "inline-block";
        return;
    }

    draw();
    requestAnimationFrame(update);
}

// Start button shows shape menu
startBtn.onclick = () => {
    startBtn.style.display = "none";
    shapeMenu.style.display = "block";
}

// Choose shape and start game
shapeButtons.forEach(btn => {
    btn.onclick = () => {
        playerShape = btn.getAttribute("data-shape");
        shapeMenu.style.display = "none";
        canvas.style.display = "block";
        game = true;
        update();
    }
});

// Flap controls
document.addEventListener("keydown", e => {
    if(e.code==="Space" && game) plane.vy = flap;
});
document.addEventListener("mousedown", () => { if(game) plane.vy = flap; });

</script>
</body>
</html>
